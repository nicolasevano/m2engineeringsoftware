<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://ws.apache.org/ns/synapse">
    <proxy name="bookArticle" transports="https http" startOnLoad="true" trace="enable" statistics="enable">
        <target>
            <inSequence>
                <payloadFactory>
                    <format>
                        <ns2:getAllBook xmlns:ns2="http://referential_book.sodifrance.com/"/>
                    </format>
                </payloadFactory>
                <send>
                    <endpoint>
                        <address uri="http://localhost:8080/referential-book/services/1.0.0/BookWSImplPort/getAllBook"/>
                    </endpoint>
                </send>
            </inSequence>
            <outSequence>
                <xquery key="book-to-article.xq">
                    <variable name="payload" type="ELEMENT"/>
                </xquery>
                <send/>
            </outSequence>
        </target>
    </proxy>
</definitions>
